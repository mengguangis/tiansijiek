<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Deferred Shader</title>
 <style>
      canvas { 
        width: 100%; 
        height: 100% 
      }
    </style> 
</head>

<body>
<script src="js/three.min.js"></script>
<script src="js/OBJLoader.js"></script>
<script src="js/Detector.js"></script>
<script src="js/TrackballControls.js"></script>
<script src ="gl-matrix.js" type ="text/javascript"></script>
<script src="js/index.js"></script>
<script type="x-shader/x-vertex" id = "vs">
	uniform mat4x4 u_Model;
	uniform mat4x4 u_View;
	uniform mat4x4 u_Persp;
	uniform mat4x4 u_InvTrans;
	
	in  vec3 Position;
	in  vec3 Normal;
	in  vec2 Texcoord;
	
	out vec3 fs_Normal;
	out vec4 fs_Position;
	
	void main(void) {
		fs_Normal = (u_InvTrans*vec4(Normal,0.0f)).xyz;
		vec4 world = u_Model * vec4(Position, 1.0);
		vec4 camera = u_View * world;
		fs_Position = camera;
		gl_Position = u_Persp * camera;
	}
</script>
<script type="x-shader/x-fragment" id="fs">
	uniform vec3 u_Color;
	
	in vec3 fs_Normal;
	in vec4 fs_Position;
	in vec2 fs_Texcoord;
	
	out vec4 out_Normal;
	out vec4 out_Position;
	out vec4 out_Color;
	
	void main(void)
	{
		out_Normal = vec4(normalize(fs_Normal),0.0f);
		out_Position = vec4(fs_Position.xyz,1.0f); //Tuck position into 0 1 range
		out_Color = vec4(u_Color,1.0f);		
	}
</script>
</body>

